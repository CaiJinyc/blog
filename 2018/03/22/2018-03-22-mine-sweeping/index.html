<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 原生 JavaScript 实现扫雷游戏 · CaiJinyc's Blog</title><meta name="description" content="原生 JavaScript 实现扫雷游戏 - CaiJinyc"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/favicon.ico"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://caijin.tech/blog/atom.xml" title="CaiJinyc's Blog"></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/avatar.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/CaiJinyc" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">原生 JavaScript 实现扫雷游戏</h1><div class="post-info">2018年3月22日</div><div class="post-content"><p>学习了这么长时间的 JS，不能光看不练，于是就写了个小游戏练习一下。因为自己还是个菜鸟，所以有错误的话还请各位大佬多多指点，谢谢啦~ <a id="more"></a></p>
<p>如果感兴趣的话可以试试：<a href="http://caijin.tech/demo/mineSweeping/index.html">Demo</a><br>项目地址：<a href="https://github.com/CaiJinyc/game-mineSweepinng" target="_blank" rel="noopener">game-mineSweepinng</a></p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><h4 id="扫雷过程"><a href="#扫雷过程" class="headerlink" title="扫雷过程"></a>扫雷过程</h4><p>扫呀扫呀扫个雷。<br><img src="http://hexo-image.oss-cn-shenzhen.aliyuncs.com/18-5-2/30416056.jpg" alt=""></p>
<h4 id="扫雷失败"><a href="#扫雷失败" class="headerlink" title="扫雷失败"></a>扫雷失败</h4><p>扫雷失败就会提示扫雷失败，然后逐步显示出所有地雷（我会说我没找到地雷的图才用的炸弹吗）。<br><img src="http://hexo-image.oss-cn-shenzhen.aliyuncs.com/18-5-2/37179305.jpg" alt=""></p>
<h4 id="扫雷成功"><a href="#扫雷成功" class="headerlink" title="扫雷成功"></a>扫雷成功</h4><p>其实这里是有个动画的，彩色方块是逐步覆盖全部格子的。<br><img src="http://hexo-image.oss-cn-shenzhen.aliyuncs.com/18-5-2/34681198.jpg" alt=""></p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><h4 id="实现的功能"><a href="#实现的功能" class="headerlink" title="实现的功能"></a>实现的功能</h4><p>基本扫雷的功能都实现了，例如：</p>
<ul>
<li>计时</li>
<li>选择游戏难度</li>
<li>标记地雷（插旗子标记地雷，标记之后不能点击）</li>
<li>剩余雷数（总的雷数减去插旗的数量）</li>
<li>自动连锁点开（当点开某个区块后，如果该区块的数字为 0，也就是九宫格内没有雷，那么将自动点开九宫格内的所有区块）</li>
</ul>
<p>还做了点小彩蛋，例如：踩到地雷时，地雷会逐步显示，还有成功扫到所有雷之后，地图逐渐被彩色方块覆盖，然后提示扫雷成功。</p>
<h4 id="没有实现的功能"><a href="#没有实现的功能" class="headerlink" title="没有实现的功能"></a>没有实现的功能</h4><p>自定义，问号标记（偷懒了偷懒了，说不定以后会补上呢 <em>（鬼才会信吧）</em>）。</p>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>都说写东西学的最快，这句话是很有道理的。写个小游戏，我又 Get 到了很多知识。</p>
<h4 id="生成一张扫雷地图"><a href="#生成一张扫雷地图" class="headerlink" title="生成一张扫雷地图"></a>生成一张扫雷地图</h4><p>这里当然用的是数组啦，会玩扫雷的应该都懂，如果一个方块块有雷，那么边上的值都加 1（就是根据这个扫的嘛~没有这个还怎么玩）。我相信很多人是不会像看代码的，所以我直接讲我的思路。</p>
<ol>
<li>根据行数和列数创建一个多维数组（使用 for 循环嵌套实现）</li>
<li>然后使用 Math 随机 map[x][x] 来写入雷的位置（再次使用 for 循环，写入 9（9 就代表雷）），如果位置已经有雷了就重写随机然后写入</li>
<li>然后我们就会得到一个这样的数组，这个时候我们只需要让 9 的四周加上 1<br>[ [0, 9, 0, 0],<br>  [0, 0, 9, 0],<br>  [9, 0, 9, 0],<br>  [0, 9, 0, 0] ]</li>
<li>得到这样的数组，这样就大功告成啦。<br>[  [1, 9, 2, 1],<br>  [2, 4, 9, 2],<br>  [9, 4, 9, 2],<br>  [2, 9, 2, 1]  ]</li>
</ol>
<h4 id="将地图写入页面"><a href="#将地图写入页面" class="headerlink" title="将地图写入页面"></a>将地图写入页面</h4><p>使用 doucument.querySelector 获取到元素节点，然后使用 innerHTML 就行了。（感觉自己说这两句像是在放屁）。想了解的直接去 Github 看源码把，一看就懂。</p>
<h4 id="自动连锁点开"><a href="#自动连锁点开" class="headerlink" title="自动连锁点开"></a>自动连锁点开</h4><p>这个比较难，想了挺久的。思路大概是这样：</p>
<ol>
<li>点击到为 0 的位置，就自动显示周围一圈的位置。</li>
<li>然后周围一圈的还有为 0 的位置，就继续显示周围一圈，然后循环到没有为止。</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/blog/2018/03/25/2018-03-25-css-center/" class="prev">PREV</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'caijinyc';
var disqus_identifier = '2018/03/22/2018-03-22-mine-sweeping/';
var disqus_title = '原生 JavaScript 实现扫雷游戏';
var disqus_url = 'http://caijin.tech/blog/2018/03/22/2018-03-22-mine-sweeping/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//caijinyc.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2018 <a href="http://caijin.tech/blog">CaiJinyc</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>